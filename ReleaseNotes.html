<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Debugger-based On-Target Testing: Release Notes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxyStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="dott_ng_logo_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">Debugger-based On-Target Testing
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Release Notes </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_doc_user_manual_src_release_notes"></a> </p><h1>Features</h1>
<p >DOTT.NG - Debugger-based On-Target Testing framework 'new-gen' supporting:</p><ul>
<li>On-target testing of unmodified firmware functions.</li>
<li>Selective injection of data into execution flow.</li>
<li>Execution of test on host machine.</li>
</ul>
<h1>Documentation</h1>
<p >Documentation comes as an integrated package in HTML format which contains the following chapters:</p><ul>
<li>Overview</li>
<li>Release notes and changelog</li>
<li>Setup instructions</li>
<li>Component testing guide</li>
<li>System testing guide</li>
<li>Developer's guide</li>
<li>Reference platform</li>
<li>External test equipment</li>
</ul>
<h1>Test Level</h1>
<ul>
<li>All testing is performed with Python v3.10 and 3.12.</li>
<li>Tests are performed on Windows 10 (64 bit) and Ubuntu Linux 22.04 (64bit).</li>
<li>Limited testing is performed on Manjaro (Arch) Linux and Windows 11.</li>
</ul>
<h1>Changelog</h1>
<h1>1.21.3</h1>
<ul>
<li>Fixed issue where InterceptPoint hit count was wrong.</li>
</ul>
<h1>1.21.2</h1>
<ul>
<li>Added a default timeout to HaltPoint wait_complete function (instead of waiting indefinitely).</li>
</ul>
<h1>1.21.1</h1>
<ul>
<li>Relaxed requirements for pylink-square.</li>
</ul>
<h1>1.21.0</h1>
<ul>
<li>Added peripheral based grouping option to <code>svd2dott</code> utility.</li>
</ul>
<h1>1.20.0</h1>
<ul>
<li>Updated dott-ng-runtime requirements to &gt;= 1.1.2 which effectively increases the used runtime version to 2.13.3 (but still allows to install 1.1.2 for backwards compatibiltiy)</li>
</ul>
<h1>1.19.0</h1>
<ul>
<li>The <code>svd2dott</code> tool supports a new argument <code>-p</code> which adds the peripheral name as prefix to the register names of a peripheral.</li>
<li>The <code>live_access</code> fixture is considered deprecated and will be removed with on of the next DOTT releases.</li>
</ul>
<h3>1.18.0</h3>
<ul>
<li>Backend agility: Support switching between 'traditional' (1.x) and new GDB backend (2.x). Default runtime remains 1.x</li>
<li>New command <code>cli_exec_data</code> returns the full output data of a CLI command as dictionary. This is in contrast to <code>cli_exec</code> which only returned the status code of the CLU command. <br  />
</li>
</ul>
<h3>1.17.1</h3>
<ul>
<li>Improved recovery from ConnectionAbortedError in InterceptPoint</li>
<li>Added note about accepted types for alloc_type function.</li>
</ul>
<h3>1.17.0</h3>
<ul>
<li>Made NotifySubscriberExt the default implementation.</li>
<li>Enhanced InterceptPoint performance.</li>
<li>Update usages of <code>log.warn</code> with <code>log.warning</code>.</li>
</ul>
<h3>1.16.0</h3>
<ul>
<li>Release is considered deprecated as stability issues on Windows 11 were discovered.</li>
</ul>
<h3>1.15.1 (2024/06/23)</h3>
<ul>
<li>Changed behavior of notification propagation: Strict ordering of notifications is now maintained.</li>
<li>Added GDBMI in memory log dump (enabled via environment variable <code>DOTT_DEBUG_GDBMI=1</code>) when HaltPoint is not reached.</li>
<li>Added <code>target.finish()</code> which resumes execution of the current target function and returns when the function is completed. The target is then in halted state.</li>
<li>Added reason sanity checks to calls for <code>wait_halted</code>.</li>
</ul>
<h3>1.15.0 (2024/04/24)</h3>
<ul>
<li>Added exception propagation from sub threads to main thread.</li>
<li>Improved fairness for notifications for threads waiting for halted/running events.</li>
<li>Enhanced GDB server port auto increment.</li>
<li>Added snippet which illustrates handling of function pointers in Arm Thumb mode.</li>
</ul>
<h3>1.14.0 (2024/03/08)</h3>
<ul>
<li>Added DOTT register access classes.</li>
<li>Added <code>svd2dott</code> command line tool to convert CMSIS SVD peripheral and register descriptions to DOTT register classes.</li>
</ul>
<h3>1.13.1 (2024/02/10)</h3>
<ul>
<li>Enhanced thread handling for GDB MI response management.</li>
</ul>
<h3>1.13.0 (2024/02/06)</h3>
<ul>
<li>Added fast in-memory log capture utility for GDBMI tracing (enabled via environment variables: DOTT_DEBUG_GDBMI=1 and DOTT_DEBUG_GDBMI_DUMP_ON_EXIT=1).</li>
<li>Fixed potential issue where target state was captured incorrectly in target halt/cont calls.</li>
<li>Improved state change handling in source line and instruction stepping commands.</li>
</ul>
<h3>1.12.1 (2024/01/27)</h3>
<ul>
<li>Raise value error if zero bytes of on-target memory are requested to be allocated.</li>
<li>Allow to skip setting target as default target if there is no default target yet.</li>
</ul>
<h3>1.12 (2024/01/24)</h3>
<ul>
<li>Fixed issue where singleton was not correctly accepting constructor parameters.</li>
<li>Default target is no longer mandatory (see examples in 03_snippets).</li>
<li>Deprecated method Dott.create_gdb_server() has benn removed.</li>
<li>Updated DottConf(Ext) documentation.</li>
<li>DottConfExt.parse_config() has new silence argument.</li>
<li>DOTT logger can now be also accessed via dott().target.log property.</li>
</ul>
<h3>1.11 (2023/11/26)</h3>
<ul>
<li>DOTT-NG is now compliant (and tested) with Python 3.12.0 (64bit).</li>
</ul>
<h3>1.10 (2023/11/13)</h3>
<ul>
<li>Added first support for PE-Micro debug probes via PE-Micro gdb server from Eclipse plugin</li>
<li>Fixed issue with alignment calculation of scoped on target memory allocator</li>
<li>Officially changed minimum Python requirement to 3.10.</li>
</ul>
<h3>1.9.3 (2023/08/01)</h3>
<ul>
<li>Fixed issue where target was not propagated to HaltPoints created in fixture helpers.</li>
</ul>
<h3>1.9.2 (2023/07/30)</h3>
<ul>
<li>Allow <code>app_symbol_elf</code> to be not set in DottConf (and avoid issue when <code>app_load_elf</code> is not set either).</li>
<li>Omit startup info messages about J-Link if monitor type is not J-Link.</li>
</ul>
<h3>1.9.1 (2023/07/16)</h3>
<ul>
<li>Updated stopping of sub-threads with now stop automatically when the main thread terminates. With that, the <code>dott_auto_connect_and_disconnect</code> fixture was removed.</li>
<li>Allow <code>app_load_elf</code> to be not set in DottConf.</li>
<li>Changed location of <code>gdb_pre_connect_hook</code> and passing the target instance to it.</li>
</ul>
<h3>1.9.0 (2023/07/09)</h3>
<ul>
<li>A new pre-connect <code>gdb_pre_connect_hook</code> was added which is called before GDB client connects to GDB server.</li>
<li>Internal re-work of debug monitor and gdb server creation.</li>
<li>Ongoing internal re-structuring of the <code>DottConf</code> configuration mechanisms resulting in API changes listed below:</li>
<li>The method <code>dott().create_gdb_server(...)</code> will be deprecated as part of API refinement. Use <code>dott().target.monitor.create_gdb_server()</code> instead.</li>
<li>The parameter <code>jlink_serial</code> was removed from <code>dott().create_target(...)</code>.</li>
<li>Monitor type can now be a (fully qualified) class name which is then instantiated and used.</li>
</ul>
<h3>1.8.1 (2023/05/27)</h3>
<ul>
<li>Added DottConf parameter <code>gdb_connect_timeout</code> to adjust the timeout when connecting to a GDB server instance.</li>
<li>Added DottConf parameter <code>fixture_timeout</code> to adjust the timeout used in default fixtures when waiting for halt points.</li>
<li>Breakpoint now interprets int location as address (no need to pass string with * prefix).</li>
<li>Internal restructuring of DottConf.</li>
</ul>
<h3>1.8.0 (2023/03/17)</h3>
<ul>
<li>Added new convenience functions <code>mem.write_intX()</code>, <code>mem.write_uintX()</code>, <code>mem.read_intX()</code> and <code>mem.read_uintX()</code>.</li>
<li>Added quicksort example to getting started demo code.</li>
<li>Fixed issue with J-Link extra config option.</li>
<li>Added support to ignore timeout when disconnecting from GDB client where the target was already reset.</li>
</ul>
<h3>1.7.2 (2023/03/14)</h3>
<ul>
<li>Fixed compatibility issue with Python 3.11.</li>
<li>Added J-Link extra config option to DottConf.</li>
</ul>
<h3>1.7.1 (2023/03/05)</h3>
<ul>
<li>Internal change: Replaced "GDB server quirks" with more generic debug monitor abstraction.</li>
<li>Now raising exception if amount of memory allocated via alloc_type and initialization value are incompatible.</li>
<li>New DOTT config option to specify JLink script for JLink GDB server initialization.</li>
</ul>
<h3>1.7.0 (2022/11/18)</h3>
<ul>
<li>First version of DOTT released under its new name DOTT.NG which is a fork of the original ams DOTT framework. Consider ams DOTT as deprecated. Development will continue on the DOTT.NG fork.</li>
<li>DOTT.NG 1.7.0 is fully feature compatible with ams DOTT 1.6.4. Module names (and hence imports) remain the same.</li>
<li>The Python packages now carry the names <code>dott-ng</code> and <code>dott-ng-runtime</code>.</li>
<li>The included examples are now built with the free Arm GNU toolchain instead of the proprietary Arm Compiler 6.</li>
<li>Fixed (cosmetic) issue where gdb stdout was shown in foreground on Linux when running pytest with '-s' flag.</li>
</ul>
<h3>1.6.4 (2022/09/29)</h3>
<ul>
<li>Avoid halting already halted target (causing issues with OpenOCD)</li>
<li>Improved <code>breakpoint-hit</code> handling for OpenOCD.</li>
</ul>
<h3>1.6.3 (2022/05/10)</h3>
<ul>
<li>Fix versions of most important dependencies (as, e.g., pygdbmi).</li>
<li>Add index notation for TypedPtr to access elements of arrays allocated on-target. See <code>test_example_SumElements</code> in <code>test_example_functions.py</code>.</li>
</ul>
<h3>1.6.2 (2022/01/20)</h3>
<ul>
<li>If GDB server is detected as OpenOCD, <code>monitor reset halt</code> is used instead of <code>monitor reset</code> in <code>dottmi.target.Target.halt()</code>.</li>
</ul>
<h3>1.6.1 (2022/01/16)</h3>
<ul>
<li>Added quirks to support OpenOCD's naming of xPSR register and monitor commands.</li>
</ul>
<h3>1.6.0 (2021/12/08)</h3>
<ul>
<li>Added optional timeout to <code>dottmi.target.Target.eval()</code>.</li>
<li>Added <code>C:\Program Files\</code> to search path for JLink dll (supporting 64bit JLink releases).</li>
<li>Ignore instances of JLink dll where not JLink GDB server binary is in same folder (e.g., ignore Ozone install dirs which have a JLink DLL but no GDB server binary).</li>
<li>If <code>dottmi.target.Target.eval()</code> returns a CPP reference, the address is prefixed with @ by GDB. The leading is now automatically removed from the address.</li>
<li>Added decoder/pretty printer <code>dottmi.target.Target.reg_cm_xpsr_to_str()</code>. for Arm Cortex-M xPSR register.</li>
<li>Halting the target via <code>dottmi.target.Target.halt()</code> now ensures by default that the target is halted outside an IT block. This behavior can be changed via the new optional parameter <code>halt_in_it_block</code></li>
<li>Fixed parsing issue for BL symbol address in dott.ini.</li>
</ul>
<h3>1.5.1 (2021/08/06)</h3>
<ul>
<li>Fixed issue where <code>dottmi.target.Target.ret()</code> when used without return value failed.</li>
<li>Enhanced (internal) mechanism which reports the target's state (running or halted).</li>
</ul>
<h3>1.5.0 (2021/06/18)</h3>
<ul>
<li>minor code cleanups</li>
<li>DOTT released to Open Source community</li>
</ul>
<h3>1.3.2 (2021/04/22)</h3>
<ul>
<li>Removed unwanted debug message.</li>
</ul>
<h3>1.3.1 (2021/04/15)</h3>
<ul>
<li>Added new function to flush GDB's internal register cache. This is useful if the target is reset by other means than GDB and hence GDB is not aware of this reset (and the register changes resulting from it).<ul>
<li><code>dottmi.target.Target.reg_flush_cache()</code></li>
</ul>
</li>
<li>The function <code>dottmi.target.Target.reset()</code> now automatically flushed the GDB register cache. This can be altered by setting the <code>flush_reg_cache</code> parameter.</li>
<li>DOTT's default FLASH and SRAM reset fixtures (which use <code>dottmi.target.Target.reset()</code>) now also flush the GDB register cache.</li>
</ul>
<h3>1.3.0 (2021/03/10)</h3>
<ul>
<li>Added support to disconnect and reconnect a target's GDB client from the GDB server. Target API additions:<ul>
<li><code>dottmi.target.Target.gdb_client_connect()</code></li>
<li><code>dottmi.target.Target.gdb_client_disconnect()</code></li>
</ul>
</li>
<li>Added support to stop a target's GDB server and to set a (new) GDB server instance for a target. Target API additions:<ul>
<li><code>dottmi.target.Target.gdb_server_stop()</code></li>
<li><code>dottmi.target.Target.gdb_server_set()</code></li>
</ul>
</li>
<li>Added support to created GDB server instances by users. Dott API addition:<ul>
<li><code>dottmi.dott.Dott.create_gdb_server()</code></li>
</ul>
</li>
<li>Added check to detect if TCP ports used by GDB server are available before starting the server. If unavailable, port numbers are automatically advanced to the next free ports. Port incrementation now automatically wraps around when approaching the 16bit port limit.</li>
<li>Fixed typo in setup guide.</li>
</ul>
<h3>1.2.1 (2021/01/08)</h3>
<ul>
<li>Enable setting breakpoints to a known address (and not only to symbols).</li>
<li>Corrected handling of char pointers when reading a character address.</li>
<li>Added <code>jlink_remote_addr</code> and <code>jlink_remote_port</code> to developer guide.</li>
</ul>
<h3>1.2.0 (2020/11/17)</h3>
<ul>
<li>Added alignment option for on-target memory requested via the TargetMem allocator.</li>
<li>Scoped on-target memory allocation now officially supported.</li>
<li>Relaxed too strict checks for scoped memory implementation.</li>
<li>Updated pre-stack on-target memory allocation model.</li>
<li>Added NOALLOC on-target memory allocation model.</li>
<li>Added note about Segger FLASH caching to developer guide.</li>
</ul>
<h3>1.1.0 (2020/11/05)</h3>
<ul>
<li>Linux is now officially supported (requires DOTT runtime version &gt;1.1.0).<ul>
<li>Dedicated ams-dott-runtime Python packages are now provided for Windows and Linux.</li>
<li>The DOTT framework itself (ams-dott) remains a single, platform-independent Python package.</li>
</ul>
</li>
<li>Preview of scoped on-target memory implementation for use instead of test_hook based memory allocation.</li>
</ul>
<h3>1.0.4 (2020/09/17)</h3>
<ul>
<li>Fixed incompatibility with changes introduced in pygdbmi version 0.10.0.0.</li>
</ul>
<h3>1.0.3 (2020/02/11)</h3>
<ul>
<li>Updated DOTT license to Apache 2.0.</li>
<li>Structural simplifications in preparation for release on GitHub.</li>
<li>Enabled JLink serial number configuration for multi-JLINK setups.</li>
<li>Moved dott.ini to the same folder as base conftest.py file. dott.ini is no longer mandatory (i.e., all settings can be made via DottConf).</li>
<li>Introduced DottHooks to enable target configuration before debug ports are accessed.</li>
<li>Added setup_cb to _target_reset_common for early, device-specific setup.</li>
<li>Added DOTT_RUN_SRAM environment variable for examples 1 and 2 to run them from SRAM; binaries are now available for both SRAM and FLASH.</li>
<li>New fixture 'target_load_symbols_only' which loads application symbols but does not perform target download.</li>
<li>New fixture 'target_load_flash_always' which loads the application binary to the target on a per-test basis (vs. target_load_flash which only loads once per test session).</li>
<li>Added setup.py to create wheel package which includes the required GDB and WinPython2.7 dependencies.</li>
<li>Made base function for load and reset fixtures public; in addition they take the target as an optional argument (useful for multi-target setups).</li>
</ul>
<h3>1.0.2 (2019/05/16)</h3>
<ul>
<li>Fixed issue where GDB server was not correctly started automatically.</li>
<li>Linux (Ubuntu 18.04) has been successfully tested as runtime environment for DOTT.<ul>
<li>Minor modifications have been done (e.g., ensuring that all path delimiters are platform independent).</li>
<li>Target live access is currently not supported on Linux hosts.</li>
<li>JLINK gdb server auto-launch is currently not supported on Linux hosts.</li>
<li>Overall, Linux support is currently provided 'as is'. Testing of DOTT releases is still only done on Windows 10.</li>
</ul>
</li>
</ul>
<h3>1.0.1 (2019/04/17)</h3>
<ul>
<li>Extended dott().target.mem.read() function to also accept src address as TypedPtr and str (besides int).</li>
<li>Fixed issue in reset fixture for SRAM-based applications.</li>
<li>Added note about C++ namespaces to developer's guide.</li>
<li>Added 'InterceptAtLabel' example to example tests.</li>
</ul>
<h3>1.0.0 (2019/01/25)</h3>
<ul>
<li>First official release.</li>
<li>Backend now based on GDB machine interface.</li>
<li>Support for component and system testing (free-running target).</li>
<li>Live target access support (access target memory while target is running).</li>
<li>Includes full set of examples for component and system testing.</li>
<li>Examples can be executed out of the box on a low-cost reference board.</li>
<li>Includes self-contained template project.</li>
<li>Supports on-the-fly data injection (modifying target memory).</li>
<li>Supports PiGPIO daemon for as SPI, I2C, GPIO, UART, ... interface to target.</li>
<li>Supports multi-binary applications (bootloader + application firmware).</li>
</ul>
<h3>"Preview"</h3>
<ul>
<li>Preview release for ams Software Conference 2018.</li>
</ul>
<h2>Known Issues and Limitations</h2>
<ul>
<li>Only Arm CLANG (Arm Compiler 6) is supported. GCC support is planned for later versions.</li>
<li>Number of hardware breakpoints supported by the target is not checked. It is up to the user to not use more than the maximum number of concurrently available hardware breakpoints in a single test. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
